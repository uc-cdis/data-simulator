$schema: "http://json-schema.org/draft-04/schema#"

id: "aliquot"
title: Aliquot
type: object
namespace: null
category: biospecimen
program: '*'
project: '*'
description: >-
  Pertaining to a portion of the whole; any one of two or more samples of something,
  of the same volume or weight.
additionalProperties: false
submittable: true
validators: '[]'

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: samples
    backref: aliquots
    label: derived_from
    target_type: sample
    multiplicity: many_to_many
    required: true

required:
  - submitter_id
  - samples

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  type:
    type: string

  id:
    $ref:
      - "_definitions.yaml#/uuid"
    systemAlias: node_id

  state:
    $ref:
      - "_definitions.yaml#/state"

  submitter_id:
    description: >-
      The legacy barcode used before prior to the use UUIDs. For TCGA this is bcraliquotbarcode.
    oneOf:
      - type: string
      - type: "null"

  aliquot_quantity:
    $ref:
      - "_terms.yaml#/aliquot_quantity/common"
    type: number

  aliquot_volume:
    $ref:
      - "_terms.yaml#/aliquot_volume/common"
    type: number

  amount:
    $ref:
      - "_terms.yaml#/amount/common"
    type: number

  analyte_type:
    $ref:
      - "_terms.yaml#/analyte_type/common"
    type: string

  analyte_type_id:
    $ref:
      - "_terms.yaml#/analyte_type_id/common"
    enum:
      - D
      - E
      - G
      - H
      - R
      - S
      - T
      - W
      - X
      - Y

  concentration:
    $ref:
      - "_terms.yaml#/concentration/common"
    type: number

  project_id:
    $ref:
      - "_definitions.yaml#/project_id"

  source_center:
    $ref:
      - "_terms.yaml#/source_center/common"
    type: string

  created_datetime:
    $ref:
      - "_definitions.yaml#/datetime"

  updated_datetime:
    $ref:
      - "_definitions.yaml#/datetime"

  samples:
    $ref: "_definitions.yaml#/to_many"
